{"version":3,"file":"ngx-apple-mapkit.mjs","sources":["../../../projects/ngx-apple-mapkit/src/lib/apple-maps.service.ts","../../../projects/ngx-apple-mapkit/src/lib/services/geocoder/apple-maps-geocoder.service.ts","../../../projects/ngx-apple-mapkit/src/lib/services/search/apple-maps-search.service.ts","../../../projects/ngx-apple-mapkit/src/lib/apple-mapkit.component.ts","../../../projects/ngx-apple-mapkit/src/lib/apple-mapkit.component.html","../../../projects/ngx-apple-mapkit/src/lib/components/apple-mapkit-annotation/apple-mapkit-annotation.component.ts","../../../projects/ngx-apple-mapkit/src/lib/components/apple-mapkit-annotation/apple-mapkit-annotation.component.html","../../../projects/ngx-apple-mapkit/src/lib/apple-maps.module.ts","../../../projects/ngx-apple-mapkit/src/public-api.ts","../../../projects/ngx-apple-mapkit/src/ngx-apple-mapkit.ts"],"sourcesContent":["import {Inject, Injectable, PLATFORM_ID} from '@angular/core';\nimport {isPlatformBrowser} from '@angular/common';\nimport {\n    CoordinatesInterface,\n    DistancesString,\n    MapConstructorOptions,\n    MapKitCompass,\n    MapKitGetCameraZoomRange,\n    MapKitInitOptions,\n    MapKitLoaded,\n    MapShowItemOptionsInterface,\n    MapTypeString,\n    PaddingInterface,\n    SchemeString,\n    ShowsScaleString,\n    SpanInterface\n} from \"./declarations\";\nimport {mapkit} from \"./mapkit\";\n\ndeclare global {\n    interface Window {\n        mapkit: any;\n    }\n}\n\n@Injectable({providedIn: 'root'})\nexport class AppleMapsService {\n    public isBrowser: boolean;\n    public maps: mapkit.Map[] = [];\n    public mapsQueue = [];\n    public initialized = 'STOPPED';\n    public annotations: {[s: number]: mapkit.Annotation[]} = {};\n    private options: any;\n    public location: any;\n    public region: any;\n    public center: any;\n\n    constructor(@Inject(PLATFORM_ID) private platformId: Object) {\n        this.isBrowser = isPlatformBrowser(this.platformId);\n    }\n\n    private static settingsLoadedTransform(settings = {}) {\n        const newSettings = {};\n        for (const item in settings) {\n            if (settings[item]) {\n                switch (item) {\n                    case 'center':\n                        newSettings[item] = new window.mapkit.Coordinate(settings[item].latitude, settings[item].longitude);\n                        break;\n                    case 'region':\n                        const regionCenter = new window.mapkit.Coordinate(settings[item].center.latitude, settings[item].center.longitude);\n                        if (settings[item].span) {\n                            const regionSpan = new window.mapkit.CoordinateSpan(settings[item].span.from, settings[item].span.to);\n                            newSettings[item] = new window.mapkit.CoordinateRegion(regionCenter, regionSpan);\n                            break;\n                        }\n                        newSettings[item] = new window.mapkit.CoordinateRegion(regionCenter);\n                        break;\n                    case 'padding':\n                        newSettings[item] = new window.mapkit.Padding(settings[item]);\n                        break;\n                    default:\n                        newSettings[item] = settings[item];\n                        break;\n                }\n            }\n        }\n        return newSettings;\n    }\n\n    public init(options: MapKitInitOptions, settings: MapConstructorOptions = {}, cb = (data: MapKitLoaded) => {\n    }) {\n        if (!options.JWT || !this.isBrowser) {\n            return;\n        }\n        if (Object.keys(settings).length !== 0) {\n            this.mapsQueue.push({settings, cb});\n        }\n        if (this.initialized === 'STOPPED') {\n            this.initialized = 'PENDING';\n            this.options = options;\n            window.mapkit.init({\n                authorizationCallback: (done: (token: string) => void) => {\n                    done(options.JWT);\n                },\n                language: options.language\n            });\n            this.addMapInitOptionsListeners(options);\n        }\n        if (this.initialized === 'FINISHED') {\n            this.createMaps();\n        }\n    }\n\n    private createMaps() {\n        const maps = document.querySelectorAll('ngx-apple-mapkit');\n        maps.forEach(element => {\n            const mapContainer = element.childNodes[0].childNodes[0] as HTMLElement;\n            if (!mapContainer.innerHTML) {\n                this.createMap(mapContainer);\n            }\n        });\n    }\n\n    public createMap(element: HTMLElement) {\n        const options = this.mapsQueue.shift();\n        const index = this.maps.push(new window.mapkit.Map(element, AppleMapsService.settingsLoadedTransform(options.settings)));\n        const object: MapKitLoaded = {\n            key: index - 1,\n            map: this.maps[index - 1],\n            addEventListener: (type, listener, context) => {\n                if (!type || !listener) {\n                    throw new Error('Type and listener are required');\n                }\n                return this.maps[index - 1].addEventListener(type, <any>listener, context);\n            },\n            isRotationAvailable: () => {\n                return this.maps[index - 1].isRotationAvailable;\n            },\n            isRotationEnabled: () => {\n                return this.maps[index - 1].isRotationEnabled;\n            },\n            isScrollEnabled: () => {\n                return this.maps[index - 1].isScrollEnabled;\n            },\n            isZoomEnabled: () => {\n                return this.maps[index - 1].isZoomEnabled;\n            },\n            getCenter: (): CoordinatesInterface => {\n                const {latitude, longitude} = this.maps[index - 1].center;\n                return {latitude, longitude};\n            },\n            // setCenter: (latitude: number, longitude: number) => {\n            //   this.maps[index - 1].center = new window.mapkit.Coordinate(latitude, longitude);\n            // },\n            setCenterAnimated: (latitude: number, longitude: number, animate: boolean = true) => {\n                this.maps[index - 1].setCenterAnimated(new window.mapkit.Coordinate(latitude, longitude), animate);\n            },\n            getRegion: () => {\n                return this.maps[index - 1].region;\n            },\n            setRegionAnimated: (center: CoordinatesInterface, span: SpanInterface = null, animate: boolean = true) => {\n                const regionCenter = new window.mapkit.Coordinate(center.latitude, center.longitude);\n                if (span) {\n                    const regionSpan = new window.mapkit.CoordinateSpan(span.from, span.to);\n                    this.maps[index - 1].setRegionAnimated(new window.mapkit.CoordinateRegion(regionCenter, regionSpan), animate);\n                    return;\n                }\n                this.maps[index - 1].setRegionAnimated(new window.mapkit.CoordinateRegion(regionCenter), animate);\n            },\n            getRotation: (): number => {\n                return this.maps[index - 1].rotation;\n            },\n            setRotationAnimated: (degrees: number, animate: boolean = true): void => {\n                this.maps[index - 1].setRotationAnimated(degrees, animate);\n            },\n            // getVisibleMapRect: () => {\n            //   return this.maps[index - 1].visibleMapsRect;\n            // },      // setVisibleMapRectAnimated: () => {\n            // }\n            getCameraDistance: (): number => {\n                return this.maps[index - 1].cameraDistance;\n            },\n            setCameraDistanceAnimated: (distance: number, animate: boolean = true): void => {\n                this.maps[index - 1].setCameraDistanceAnimated(distance, animate);\n            },\n            getCameraZoomRange: (): MapKitGetCameraZoomRange => {\n                const {minCameraDistance, maxCameraDistance} = this.maps[index - 1].cameraZoomRange;\n                return {minCameraDistance, maxCameraDistance};\n            },\n            setCameraZoomRangeAnimated: (minCameraDistance, maxCameraDistance, animate: boolean = true): void => {\n                this.maps[index - 1].setCameraZoomRangeAnimated(new window.mapkit.CameraZoomRange(minCameraDistance, maxCameraDistance), animate);\n            },\n            getColorScheme: (): string => {\n                return this.maps[index - 1].colorScheme;\n            },\n            setColorScheme: (scheme: SchemeString = 'light') => {\n                this.maps[index - 1].colorScheme = scheme;\n            },\n            getDistances: (): DistancesString => {\n                return <any>this.maps[index - 1].distances;\n            },\n            setDistances: (distance: DistancesString) => {\n                this.maps[index - 1].distances = distance;\n            },\n            getMapType: () => {\n                return <any>this.maps[index - 1].mapType;\n            },\n            setMapType: (type: MapTypeString) => {\n                this.maps[index - 1].mapType = type;\n            },\n            getPadding: (): object => {\n                return this.maps[index - 1].padding;\n            },\n            setPadding: (padding: PaddingInterface) => {\n                this.maps[index - 1].padding = new window.mapkit.Padding(padding);\n            },\n            getShowsMapTypeControl: (): boolean => {\n                return this.maps[index - 1].showsMapTypeControl;\n            },\n            setShowsMapTypeControl: (value: boolean) => {\n                this.maps[index - 1].showsMapTypeControl = value;\n            },\n            getShowsZoomControl: (): boolean => {\n                return this.maps[index - 1].showsZoomControl;\n            },\n            setShowsZoomControl: (value: boolean) => {\n                this.maps[index - 1].showsZoomControl = value;\n            },\n            getShowsUserLocationControl: (): boolean => {\n                return this.maps[index - 1].showsUserLocationControl;\n            },\n            setShowsUserLocationControl: (value: boolean) => {\n                this.maps[index - 1].showsUserLocationControl = value;\n            },\n            getShowsPointsOfInterest: (): boolean => {\n                return this.maps[index - 1].showsPointsOfInterest;\n            },\n            setShowsPointsOfInterest: (value: boolean) => {\n                this.maps[index - 1].showsPointsOfInterest = value;\n            },\n            getShowsScale: (): ShowsScaleString => {\n                return <any>this.maps[index - 1].showsScale;\n            },\n            setShowsScale: (value: ShowsScaleString) => {\n                this.maps[index - 1].showsScale = value;\n            },\n            getTintColor: (): string => {\n                return this.maps[index - 1].tintColor;\n            },\n            setTintColor: (color: string) => {\n                this.maps[index - 1].tintColor = color;\n            },\n            showItems: (items, mapShowItemOptions: MapShowItemOptionsInterface = {}) => {\n                const passingOptions = {animate: options.animate || true};\n                if (mapShowItemOptions.span) {\n                    // @ts-ignore\n                    passingOptions.minimumSpan = new window.mapkit.CoordinateSpan(mapShowItemOptions.span.from, mapShowItemOptions.span.to);\n                }\n                if (mapShowItemOptions.padding) {\n                    // @ts-ignore\n                    passingOptions.padding = new window.mapkit.Padding(mapShowItemOptions.padding);\n                }\n                const passingItems = Array.isArray(items) ? items : [items];\n                this.maps[index - 1].showItems(passingItems, passingOptions);\n            },\n            getAnnotations: () => {\n                return new Promise(resolve => {\n                    if (this.annotations[index - 1]) {\n                        resolve(this.annotations[index - 1]);\n                    } else {\n                        setTimeout(() => {\n                            if (this.annotations[index - 1]) {\n                                resolve(this.annotations[index - 1]);\n                            } else {\n                                resolve([]);\n                            }\n                        }, 500);\n                    }\n                });\n                // return this.annotations[index - 1];\n            },\n            getSelectedAnnotations: () => {\n                return this.maps[index - 1].selectedAnnotation;\n            },\n            set showsCompass(value: MapKitCompass) {\n                this.maps[index - 1].showsCompass = value;\n            },\n            get showsCompass(): MapKitCompass {\n                return this.maps[index - 1].showsCompass;\n            },\n            get showsMapTypeControl(): boolean {\n                return this.maps[index - 1].showsMapTypeControl;\n            },\n            set showsMapTypeControl(value: boolean) {\n                this.maps[index - 1].showsMapTypeControl = value;\n            },\n            get showsZoomControl(): boolean {\n                return this.maps[index - 1].showsZoomControl;\n            },\n            set showsZoomControl(value: boolean) {\n                this.maps[index - 1].showsZoomControl = value;\n            },\n            get showsUserLocationControl(): boolean {\n                return this.maps[index - 1].showsUserLocationControl;\n            },\n            set showsUserLocationControl(value: boolean) {\n                this.maps[index - 1].showsUserLocationControl = value;\n            },\n            get showsPointsOfInterest(): boolean {\n                return this.maps[index - 1].showsPointsOfInterest;\n            },\n            set showsPointsOfInterest(value: boolean) {\n                this.maps[index - 1].showsPointsOfInterest = value;\n            },\n            get tintColor(): string {\n                return this.maps[index - 1].tintColor;\n            },\n            set tintColor(color: string) {\n                this.maps[index - 1].tintColor = color;\n            }\n        };\n        options.cb(object);\n    }\n\n    private addMapInitOptionsListeners(options) {\n        window.mapkit.addEventListener('configuration-change', (event) => {\n            if (options.callback) {\n                options.callback(event);\n            }\n            switch (event.status) {\n                case 'Initialized':\n                    // MapKit JS initialized and configured.\n                    this.initialized = 'FINISHED';\n                    this.createMaps();\n                    // this.createMap(settings);\n                    break;\n                case 'Refreshed':\n                    // MapKit JS configuration updated.\n                    break;\n            }\n        });\n        window.mapkit.addEventListener('error', (event) => {\n            this.initialized = 'STOPPED';\n            if (options.callback) {\n                options.callback(event);\n            }\n        });\n    }\n\n    public getUserLocation(timeout = 5000) {\n        return new Promise((resolve, reject) => {\n            navigator.geolocation.getCurrentPosition((result) => {\n                this.location = result;\n                resolve(result);\n            }, (err) => {\n                reject(err);\n            }, {timeout});\n        });\n    }\n\n    public optionsChanged(changes) {\n        changes.forEachItem((item) => {\n            if (item.previousValue !== item.currentValue) {\n                switch (item.key) {\n                    case 'language':\n                        window.mapkit.language = item.currentValue;\n                        break;\n                    case 'JWT':\n                        break;\n                    default:\n                        break;\n                }\n            }\n        });\n    }\n\n    public settingsChanged(changes: any, key: any) {\n        if (key >= 0) {\n            changes.forEachItem((item) => {\n                if (item.previousValue !== item.currentValue) {\n                    switch (item.key) {\n                        case 'colorScheme':\n                            this.maps[key][item.key] = item.currentValue;\n                            break;\n                        case 'center':\n                            this.maps[key].setCenterAnimated(new window.mapkit.Coordinate(item.currentValue.latitude, item.currentValue.longitude), true);\n                            break;\n                        case 'region':\n                            // tslint:disable-next-line:max-line-length\n                            const regionCenter = new window.mapkit.Coordinate(item.currentValue.center.latitude, item.currentValue.center.longitude);\n                            if (item.currentValue.span) {\n                                const regionSpan = new window.mapkit.CoordinateSpan(item.currentValue.span.from, item.currentValue.span.to);\n                                this.maps[key].setRegionAnimated(new window.mapkit.CoordinateRegion(regionCenter, regionSpan));\n                                break;\n                            }\n                            this.maps[key].setRegionAnimated(new window.mapkit.CoordinateRegion(regionCenter));\n                            break;\n                        case 'padding':\n                            this.maps[key] = new window.mapkit.Padding(item.currentValue);\n                            break;\n                        default:\n                            this.maps[key][item.key] = item.currentValue;\n                            break;\n                    }\n                }\n            });\n        }\n    }\n\n    public setAnnotation(annotation: any, key: any) {\n        if (!this.annotations[key]) {\n            this.annotations[key] = [];\n        }\n        if (!this.annotations[key].includes(annotation)) {\n            this.annotations[key].push(annotation);\n            this.maps[key].addAnnotation(annotation);\n        }\n    }\n}\n\n","import {Injectable} from '@angular/core';\nimport {GeocoderConstructorOptionsInterface, GeocoderReverseLookupOptionsInterface} from '../../declarations';\n\n@Injectable({providedIn: 'root'})\nexport class AppleMapsGeocoderService {\n    private geocoder: any;\n\n    constructor() {\n    }\n\n    public initGeocoder(options: GeocoderConstructorOptionsInterface = {}) {\n        this.geocoder = new window.mapkit.Geocoder(options);\n    }\n\n    public reverseLookup(lat: number, lon: number, callback: (err: any, data?: any) => any, options: GeocoderReverseLookupOptionsInterface = {}) {\n        if (!this.geocoder) {\n            this.initGeocoder();\n        }\n        this.geocoder.reverseLookup(new window.mapkit.Coordinate(lat, lon), (err, result) => {\n            if (err) {\n                callback(err, null);\n            } else {\n                callback(null, result);\n            }\n        }, options);\n    }\n}\n","import {Injectable} from '@angular/core';\nimport {SearchInterface} from \"../../declarations\";\n\n@Injectable({providedIn: 'root'})\nexport class AppleMapsSearchService {\n    public searchObject: any;\n\n    constructor() {\n    }\n\n    public initSearch(options = {}) {\n        this.searchObject = new window.mapkit.Search(options);\n    }\n\n    public search(query: any, callback: (err: any, data?: any) => any, options: SearchInterface) {\n        if (!this.searchObject) {\n            throw new Error('Search or API don\\'t initialized');\n        }\n        this.searchObject.search(query, (err: any, data: any) => {\n            if (err) {\n                callback(err);\n                return;\n            }\n            callback(err, data);\n        }, options);\n    }\n\n    public autocomplete(query: any, callback: (err: any, data?: any) => any, options: SearchInterface) {\n        if (!this.searchObject) {\n            throw new Error('Search don\\'t initialized');\n        }\n        this.searchObject.autocomplete(query, (err: any, data: any) => {\n            if (err) {\n                callback(err);\n                return;\n            }\n            callback(err, data);\n        }, options);\n    }\n}\n","import {\n    AfterViewInit,\n    ChangeDetectorRef,\n    Component,\n    ContentChildren,\n    DoCheck,\n    EventEmitter,\n    Input,\n    KeyValueChanges,\n    KeyValueDiffers,\n    OnInit,\n    Output,\n    QueryList,\n    ViewContainerRef\n} from '@angular/core';\nimport {MapConstructorOptions, MapKitInitOptions, MapKitLoaded} from \"./declarations\";\nimport {BehaviorSubject} from \"rxjs\";\nimport {AppleMapsService} from \"./apple-maps.service\";\nimport {AppleMapkitAnnotationComponent} from \"./components/apple-mapkit-annotation/apple-mapkit-annotation.component\";\n\n@Component({\n    selector: 'ngx-apple-mapkit',\n    templateUrl: './apple-mapkit.component.html',\n    styleUrls: ['./apple-mapkit.component.css']\n})\nexport class AppleMapkitComponent implements DoCheck, OnInit, AfterViewInit {\n    @Input() options: MapKitInitOptions;\n    @Input() settings: MapConstructorOptions;\n    @Input() logging: boolean = false;\n    @Input() language: \"en\" | \"de\" | \"es\" | \"it\" |  \"fr\" | string;\n    @Input() height: string;\n    @Output() onLoaded: EventEmitter<MapKitLoaded> = new EventEmitter<MapKitLoaded>();\n    private loaded: MapKitLoaded = null;\n    @ContentChildren('apple-mapkit-annotation', {descendants: true}) annotations: QueryList<AppleMapkitAnnotationComponent>;\n    // @ContentChildren(TemplateRef, {descendants: true}) template: QueryList<TemplateRef<any>>;\n    // private templates: QueryList<TemplateRef<any>>;\n    public defaultOptions = {language: 'en'};\n    // annotations = [];\n    public defaultSettings = {\n        colorScheme: window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light',\n        isZoomEnabled: true,\n        mapType: 'standard',\n        showsZoomControl: true,\n        showsMapTypeControl: true\n    };\n    // tslint:disable-next-line:variable-name\n    private _options: any;\n    // tslint:disable-next-line:variable-name\n    private _settings: any;\n    private keyValue: number;\n    public keySource = new BehaviorSubject<number>(-1);\n    public key = this.keySource.asObservable();\n\n    constructor(private differs: KeyValueDiffers,\n                private appleMapsService: AppleMapsService,\n                private viewTemplateRef: ViewContainerRef,\n                private cdr: ChangeDetectorRef) {\n        this.settings = {};\n    }\n\n    private init() {\n        if (this.language && typeof this.language === \"string\") {\n            this.defaultOptions.language = this.language;\n        }\n        const settings = Object.assign({...this.defaultSettings, ...this.settings});\n        const options = Object.assign({...this.defaultOptions, ...this.options});\n        this.appleMapsService.init(options, settings, (data) => {\n            if (this.logging) {\n                console.log(\"[ngx-apple-mapkit] Init\", data);\n            }\n            if (!this.loaded) {\n                this.onLoaded.emit(data);\n                this.loaded = data;\n            }\n            this.keyValue = data.key;\n            this.keySource.next(data.key);\n        });\n    }\n\n    private optionsChanged(changes: KeyValueChanges<string, any>) {\n        this.appleMapsService.optionsChanged(changes);\n    }\n\n    private settingsChanged(changes: KeyValueChanges<string, any>) {\n        this.appleMapsService.settingsChanged(changes, this.keyValue);\n    }\n\n    // ngAfterContentInit(): void {\n    //     this.template.forEach(item => {\n    //         const template = this.viewTemplateRef.createEmbeddedView(item);\n    //         this.viewTemplateRef.remove(this.viewTemplateRef.indexOf(template));\n    //         template.detectChanges();\n    //         this.annotations.push(item);\n    //         this.viewTemplateRef.clear();\n    //     });\n    // }\n\n    ngOnInit() {\n        if (!this.options) {\n            throw new Error('You must provide JWT token');\n        } else {\n            this._options = this.differs.find(this.options).create();\n            this.init();\n        }\n        if (this.settings) {\n            this._settings = this.differs.find(this.settings).create();\n        }\n    }\n\n    ngDoCheck() {\n        if (this.options) {\n            const options = this._options.diff(this.options);\n            if (options) {\n                this.optionsChanged(options);\n            }\n        }\n        if (this.settings) {\n            const settings = this._settings.diff(this.settings);\n            if (settings) {\n                this.settingsChanged(settings);\n            }\n        }\n    }\n\n    ngAfterViewInit(): void {\n        this.cdr.detectChanges();\n    }\n}\n","<div class=\"ngx-apple-mapkit\">\r\n    <div class=\"ngx-apple-mapkit__map\"></div>\r\n</div>\r\n<ng-content></ng-content>\r\n<ng-container></ng-container>\r\n","import {\n    Component,\n    DoCheck,\n    ElementRef,\n    Inject,\n    Input,\n    KeyValueChanges,\n    KeyValueDiffers,\n    OnDestroy,\n    OnInit,\n    Renderer2\n} from '@angular/core';\nimport {AnnotationConstructorOptionsInterface} from '../../declarations';\nimport {AppleMapsService} from \"../../apple-maps.service\";\nimport {AppleMapkitComponent} from \"../../apple-mapkit.component\";\n\n@Component({\n    selector: 'ngx-apple-mapkit-annotation',\n    templateUrl: './apple-mapkit-annotation.component.html',\n    styleUrls: ['./apple-mapkit-annotation.component.css']\n})\nexport class AppleMapkitAnnotationComponent implements OnInit, DoCheck, OnDestroy {\n    @Input() options: AnnotationConstructorOptionsInterface;\n\n    @Input() set latitude(value: number) {\n        if (this.annotation) {\n            this.annotation.coordinate = new window.mapkit.Coordinate(value, this._longitude);\n        }\n        this._latitude = value;\n    }\n\n    get latitude(): number {\n        return this._latitude;\n    }\n\n    @Input() set longitude(value: number) {\n        if (this.annotation) {\n            this.annotation.coordinate = new window.mapkit.Coordinate(this._latitude, value);\n        }\n        this._longitude = value;\n    }\n\n    get longitude(): number {\n        return this._longitude;\n    }\n\n    private _latitude: number;\n    private _longitude: number;\n    private _options: any;\n    private annotation: any;\n    private landmarkAnnotationCallout: any;\n    private annotationElement: any;\n    private calloutEnabled = true;\n    private parentKey: any;\n\n    constructor(private appleMapsService: AppleMapsService,\n                private differs: KeyValueDiffers,\n                private ref: ElementRef,\n                private renderer: Renderer2,\n                @Inject(AppleMapkitComponent) private parent: AppleMapkitComponent) {\n    }\n\n    ngOnInit() {\n        this.annotationElement = this.renderer.createElement('div');\n        this.annotationElement.className = 'ngx-apple-mapkit__map-annotation';\n        this.renderer.appendChild(this.annotationElement, this.ref.nativeElement);\n        this.initAnnotation(this.options);\n        this.parent.key.subscribe(value => {\n            if (value >= 0) {\n                this.parentKey = value;\n                this.appleMapsService.setAnnotation(this.annotation, value);\n            }\n        });\n    }\n\n    private initAnnotation(options = {}) {\n        const transformedOptions = this.transformOptions(options);\n        // @ts-ignore\n        if (!this.ref.nativeElement.children.length || (transformedOptions && transformedOptions.calloutEnabled === false)) {\n            this.options.calloutEnabled = false;\n        }\n        this._options = this.differs.find(this.options).create();\n        if (this.latitude && this.longitude) {\n            this.createAnnotation(this.latitude, this.longitude, transformedOptions || {});\n        } else {\n            throw new Error('Latitude and longitude params are required');\n        }\n    }\n\n    private transformOption(key, value) {\n        let transformed = null;\n        switch (key) {\n            case 'padding':\n                transformed = new window.mapkit.Padding(value);\n                break;\n            default:\n                transformed = value;\n        }\n        return transformed;\n    }\n\n    private transformOptions(options) {\n        const transformedOptions = {};\n        for (const item in options) {\n            if (options[item]) {\n                transformedOptions[item] = transformedOptions[item] = this.transformOption(item, options[item]);\n            }\n        }\n        return transformedOptions;\n    }\n\n    private createAnnotation(latitude, longitude, options: AnnotationConstructorOptionsInterface = {}) {\n        this.annotation = new window.mapkit.MarkerAnnotation(new window.mapkit.Coordinate(latitude, longitude), options);\n        // console.log('this ', this.annotation);\n        if (this.ref.nativeElement.children.length) {\n            this.landmarkAnnotationCallout = {\n                calloutElementForAnnotation: (annotation) => {\n                    return this.calloutForLandmarkAnnotation(annotation);\n                }\n            };\n            this.annotation.callout = this.landmarkAnnotationCallout;\n        }\n    }\n\n    private calloutForLandmarkAnnotation(annotation) {\n        return this.annotationElement;\n    }\n\n    ngDoCheck() {\n        if (this.options) {\n            const changes = this._options.diff(this.options);\n            if (changes) {\n                this.optionsChanged(changes);\n            }\n        }\n    }\n\n    private optionsChanged(changes: KeyValueChanges<string, any>) {\n        changes.forEachItem((item) => {\n            if (item.previousValue !== item.currentValue) {\n                this.annotation[item.key] = this.transformOption(item.key, item.currentValue);\n            }\n        });\n    }\n\n    ngOnDestroy(): void {\n        this.appleMapsService.maps[this.parentKey].removeAnnotation(this.annotation);\n    }\n}\n","<ng-content></ng-content>\n","import {NgModule} from '@angular/core';\nimport {AppleMapkitComponent} from './apple-mapkit.component';\nimport {\n    AppleMapkitAnnotationComponent\n} from './components/apple-mapkit-annotation/apple-mapkit-annotation.component';\nimport {CommonModule} from '@angular/common';\n\n\n@NgModule({\n    declarations: [\n        AppleMapkitComponent,\n        AppleMapkitAnnotationComponent\n    ],\n    imports: [CommonModule],\n    exports: [\n        AppleMapkitComponent,\n        AppleMapkitAnnotationComponent\n    ],\n    bootstrap: [\n        AppleMapkitAnnotationComponent\n    ]\n})\nexport class AppleMapsModule {\n}\n","/*\n * Public API Surface of ngx-apple-mapkit\n */\n\n// <reference path=\"./lib/declarations.ts\" />\n// <reference path=\"./lib/mapkit.ts\" />\nexport * from './lib/apple-maps.service';\nexport * from './lib/services/geocoder/apple-maps-geocoder.service';\nexport * from './lib/services/search/apple-maps-search.service';\nexport * from './lib/apple-mapkit.component';\nexport * from './lib/components/apple-mapkit-annotation/apple-mapkit-annotation.component';\nexport * from './lib/apple-maps.module';\nexport * from './lib/mapkit';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["i1.AppleMapsService"],"mappings":"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"}